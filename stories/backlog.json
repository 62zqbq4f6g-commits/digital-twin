{
  "_meta": {
    "project": "Digital Twin PWA",
    "total_stories": 14,
    "architecture": "Progressive Web App"
  },
  "stories": [
    {
      "id": "DT-001",
      "title": "PWA foundation",
      "status": "backlog",
      "description": "Create base PWA structure with manifest and icons.",
      "acceptance_criteria": [
        "index.html exists with proper HTML5 structure",
        "manifest.json exists with name, icons, theme_color",
        "assets/icon-192.png exists (can be placeholder)",
        "assets/icon-512.png exists (can be placeholder)",
        "index.html links to manifest.json",
        "index.html has viewport meta tag for mobile"
      ],
      "verification": "ls index.html manifest.json && ls assets/",
      "files_to_create": ["index.html", "manifest.json", "assets/icon-192.png", "assets/icon-512.png"]
    },
    {
      "id": "DT-002",
      "title": "Design system",
      "status": "backlog",
      "description": "Create CSS with design tokens and base styles.",
      "acceptance_criteria": [
        "css/styles.css exists",
        "Has CSS custom properties (design tokens)",
        "Has color palette (black, white, grays)",
        "Has typography scale",
        "Has spacing scale",
        "Has base reset/normalize",
        "index.html links to styles.css"
      ],
      "verification": "cat css/styles.css | head -50",
      "files_to_create": ["css/styles.css"]
    },
    {
      "id": "DT-003",
      "title": "Database layer",
      "status": "backlog",
      "description": "IndexedDB wrapper for note storage.",
      "acceptance_criteria": [
        "js/db.js exists",
        "Has initDB() function",
        "Has saveNote(note) function",
        "Has getAllNotes() function",
        "Has getNotesByCategory(category) function",
        "Has deleteNote(id) function",
        "Uses IndexedDB API",
        "Can test in browser console"
      ],
      "verification": "cat js/db.js",
      "files_to_create": ["js/db.js"]
    },
    {
      "id": "DT-004",
      "title": "App shell",
      "status": "backlog",
      "description": "Create 3-screen app structure with navigation.",
      "acceptance_criteria": [
        "index.html has 3 screens: capture, notes, settings",
        "Has bottom navigation bar",
        "js/ui.js exists with screen switching logic",
        "js/app.js exists as main entry point",
        "Navigation highlights active screen",
        "Only one screen visible at a time"
      ],
      "verification": "cat index.html | grep -c 'screen' && cat js/ui.js | head -30",
      "files_to_create": ["js/ui.js", "js/app.js"]
    },
    {
      "id": "DT-005",
      "title": "Text input",
      "status": "backlog",
      "description": "Text area for capturing thoughts.",
      "acceptance_criteria": [
        "Capture screen has text input area",
        "Placeholder text: What's on your mind?",
        "Auto-expands as user types",
        "Submit button or Enter key submits",
        "Clears after successful submission",
        "Shows brief success feedback"
      ],
      "verification": "cat index.html | grep -A5 'textarea'",
      "files_to_create": []
    },
    {
      "id": "DT-006",
      "title": "Voice input",
      "status": "backlog",
      "description": "Web Speech API integration for voice capture.",
      "acceptance_criteria": [
        "js/voice.js exists",
        "Has startRecording() function",
        "Has stopRecording() function",
        "Uses Web Speech API (webkitSpeechRecognition)",
        "Shows recording state visually",
        "Populates text area with transcription",
        "Handles microphone permission gracefully",
        "Falls back gracefully if not supported"
      ],
      "verification": "cat js/voice.js",
      "files_to_create": ["js/voice.js"]
    },
    {
      "id": "DT-007",
      "title": "Classifier",
      "status": "backlog",
      "description": "Categorize input as Personal, Work, Health, or Ideas.",
      "acceptance_criteria": [
        "js/classifier.js exists",
        "Has classify(text) function",
        "Returns {category, confidence, reasoning}",
        "Detects Personal keywords (family, mom, friend, etc)",
        "Detects Work keywords (meeting, client, velolume, etc)",
        "Detects Health keywords (gym, sleep, doctor, etc)",
        "Detects Ideas keywords (idea, what if, maybe, etc)",
        "Defaults to 'personal' when ambiguous"
      ],
      "verification": "cat js/classifier.js",
      "files_to_create": ["js/classifier.js"]
    },
    {
      "id": "DT-008",
      "title": "Extractor",
      "status": "backlog",
      "description": "Extract metadata from input text.",
      "acceptance_criteria": [
        "js/extractor.js exists",
        "Has extract(text) function",
        "Returns {title, topics, action_items, sentiment, people}",
        "Title: first sentence, max 50 chars",
        "Action items: detects 'need to', 'should', 'must', 'have to'",
        "Sentiment: positive/negative/neutral",
        "People: finds capitalized names"
      ],
      "verification": "cat js/extractor.js",
      "files_to_create": ["js/extractor.js"]
    },
    {
      "id": "DT-009",
      "title": "Refiner",
      "status": "backlog",
      "description": "Convert raw input to professional formatted output.",
      "acceptance_criteria": [
        "js/refiner.js exists",
        "Has refine(rawText, classification, extracted) function",
        "Returns {summary, formatted_output}",
        "Work notes get meeting-minutes style",
        "Health notes get wellness check-in style",
        "Ideas get brainstorm style",
        "Personal gets simple clean style",
        "Output includes date, time, category icon"
      ],
      "verification": "cat js/refiner.js",
      "files_to_create": ["js/refiner.js"]
    },
    {
      "id": "DT-010",
      "title": "Note storage",
      "status": "backlog",
      "description": "Wire up processing pipeline and save to IndexedDB.",
      "acceptance_criteria": [
        "Text/voice input triggers full pipeline",
        "Pipeline: classify → extract → refine → save",
        "Note saved to IndexedDB with full schema",
        "Generates unique ID (dt_YYYYMMDD_HHMMSS_xxx)",
        "Stores timestamp with timezone",
        "Shows success message after save"
      ],
      "verification": "Submit test note and check IndexedDB in browser DevTools",
      "files_to_create": []
    },
    {
      "id": "DT-011",
      "title": "Notes list UI",
      "status": "backlog",
      "description": "Display all notes in list view with filters.",
      "acceptance_criteria": [
        "Notes screen shows all saved notes",
        "Each note shows: title, category icon, date, preview",
        "Filter tabs: All, Work, Personal, Health, Ideas",
        "Sorted by newest first",
        "Empty state when no notes",
        "Tapping note opens detail view"
      ],
      "verification": "Visual check in browser",
      "files_to_create": []
    },
    {
      "id": "DT-012",
      "title": "Note detail UI",
      "status": "backlog",
      "description": "Full note view with refined output.",
      "acceptance_criteria": [
        "Detail view shows complete refined output",
        "Shows category icon and label",
        "Shows full timestamp",
        "Shows action items as checklist",
        "Has back button to list",
        "Has delete option",
        "Markdown rendered as HTML"
      ],
      "verification": "Visual check in browser",
      "files_to_create": []
    },
    {
      "id": "DT-013",
      "title": "Copy & Export",
      "status": "backlog",
      "description": "Copy note to clipboard and export all data.",
      "acceptance_criteria": [
        "Note detail has 'Copy to Clipboard' button",
        "Copies formatted_output as markdown",
        "Shows 'Copied!' feedback",
        "Settings has 'Export All Data' button",
        "Exports all notes as JSON file download",
        "Filename: digital-twin-backup-YYYYMMDD.json"
      ],
      "verification": "Test copy and export functions in browser",
      "files_to_create": []
    },
    {
      "id": "DT-014",
      "title": "Offline & PWA",
      "status": "backlog",
      "description": "Service worker for offline support and installability.",
      "acceptance_criteria": [
        "sw.js exists",
        "Caches all app assets",
        "App works offline",
        "index.html registers service worker",
        "App is installable (Add to Home Screen)",
        "Shows install prompt on mobile",
        "Lighthouse PWA score > 90"
      ],
      "verification": "Run Lighthouse PWA audit in Chrome DevTools",
      "files_to_create": ["sw.js"]
    }
  ]
}
